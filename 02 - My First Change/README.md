# My First Change

In this exercise, we'll make superfluous modifications to the SPIR-V provided in the previous
tutorial as warm up.

## Comments

In SPIR-V, comments start with `;`.  Try adding comments to `exercise.spvasm`.  Validate the changes
by calling:

    $ ./validate

Can you comment on the same line as an instruction?

## Naming Ids

In the previous tutorial, it was mentioned that `%` ids can be either numerical or c-style variable
names.  Try changing `exercise.spvasm` by replacing numerical ids with names.  For example, a good
substitute for `%3` can be `%main`, and a good substitute for `%1` can be `%void`.

Now try introducing an intentional mistake.  For example, change the definition of `%1` to:

```swift
%void = OpTypeVoid
```

but keep `%1` elsewhere intact.  What does `./validate` say?  Now try changing `%2` as well:

```swift
     OpCapability Shader
     OpMemoryModel Logical GLSL450
     OpEntryPoint Vertex %3 "main"
%void = OpTypeVoid
%main_type = OpTypeFunction %1
%3 = OpFunction %1 None %2
%4 = OpLabel
     OpReturn
     OpFunctionEnd
```

What does `validate` say?  When it outputs the `OpTypeFunction` line, it uses `%6` instead of
`%main_type`.  This is because once assembled, the name of the ids are dropped, and only their
numerical value remains.

To see the SPIR-V after named ids are resolved, you can assemble and disassemble the SPIR-V.  The
`scripts/names_to_id` script does this:

    $ ../scripts/names_to_id exercise.spvasm

## Renaming "main"

Revert `exercise.spvasm` back to its original state.  Here's how it looked like, in case this is not
a `git` checkout:

```swift
     OpCapability Shader
     OpMemoryModel Logical GLSL450
     OpEntryPoint Vertex %3 "main"
%1 = OpTypeVoid
%2 = OpTypeFunction %1
%3 = OpFunction %1 None %2
%4 = OpLabel
     OpReturn
     OpFunctionEnd
```

Now try renaming "main" to something else.  That would be by changing the string in the line that
starts with `OpEntryPoint`.  What does `./validate` generate as GLSL after modification?  What if
you changed the string to something like "1 2 3 4"?

As mentioned in the previous tutorial, the name given to `OpEntryPoint` is used with
`VkPipelineShaderStageCreateInfo` for the sole purpose of referencing the function identified by
`%3`, which is why any string (even those not valid as a GLSL variable name) are acceptable.

How can `main` be renamed then?  SPIR-V can include debug instructions, one of which assigns a
"name" to an id.  Look up `OpName` in the SPIR-V spec.  Try adding the following instruction right
after the `OpEntryPoint` line:

```swift
     OpName %3 "new_name_for_main"
```

Behold the GLSL that is generated by `./validate`, and voila, it's still `main`.  We did technically
achieve the goal of renaming `main`, but why does SPIR-V Cross (the cross-compiler that turns SPIR-V
to GLSL, used by `./validate`) still output `main`?  Because the goal is to have the generated GLSL
be usable, and if the entry point is not called `main`, that GLSL is not usable!  In other words,
SPIR-V is more expressive than GLSL (at least in this aspect).

In the next exercise, we will make modifications to SPIR-V that would actually change the generated
GLSL.
